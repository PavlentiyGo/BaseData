# База данных магазина - Управление клиентами, товарами и продажами

## Описание проекта

Windows Forms приложение на C# для управления базой данных магазина с использованием PostgreSQL. Проект предоставляет полный функционал для работы с клиентами, товарами и заказами.

## Технический стек

- **Платформа**: .NET 8.0 Windows Forms
- **База данных**: PostgreSQL (Npgsql 9.0.3)
- **Архитектура**: Многооконное приложение с разделением на формы и пользовательские контролы

## Основные функции

### 1. Управление подключением к БД (Form2)
- Настройка параметров подключения (хост, порт, база, пользователь, пароль)
- Автоматическое создание схемы и таблиц при первом подключении
- Проверка соединения с базой данных

### 2. Главное меню (Form1)
- Централизованный доступ ко всем функциям системы
- Интуитивно понятный интерфейс с крупными кнопками

### 3. Управление клиентами
- Добавление, редактирование, удаление клиентов
- Валидация email и телефона
- Отметка постоянных клиентов
- Поиск и фильтрация клиентов

### 4. Управление товарами
- Учет товаров с ценами, единицами измерения и остатками
- Поддержка multiple currencies (RUB, USD, EUR, KZT)
- Контроль остатков на складе

### 5. Оформление продаж
- Создание заказов с выбором клиента и товаров
- Расчет итоговой суммы с учетом скидок
- Поддержка разных валют с автоматической конвертацией
- Контроль достаточности товаров на складе
- Автоматическое назначение статуса "постоянный клиент" при больших заказах

### 6. Просмотр данных (Form3)
- Табличное представление всех данных в tabbed-интерфейсе
- Детализация заказов с просмотром состава
- Возможность удаления записей с проверкой связей

## Структура базы данных

Проект создает следующие таблицы:

- **clients** - данные клиентов
- **goods** - товары и их характеристики  
- **orders** - заголовки заказов
- **order_items** - позиции заказов

## Особенности реализации

### Стилизация (Styles.cs)
- Единая цветовая схема (бежево-коричневая гамма)
- Консистентное оформление всех элементов управления
- Адаптивные кнопки с эффектами наведения

### Валидация данных
- Проверка email адресов
- Валидация номеров телефонов
- Контроль отрицательных цен и количеств
- Проверка достаточности товаров при оформлении заказа

### Безопасность
- Обработка ошибок на всех уровнях
- Защита от SQL-инъекций через параметризованные запросы
- Восстановление остатков при удалении заказов

### Бизнес-логика
- Автоматическая скидка 2% для заказов свыше 5000 руб.
- Конвертация валют по фиксированным курсам
- Автоматическое обновление статуса клиента

## Требования к системе

- Windows с установленным .NET 8.0
- Сервер PostgreSQL с доступом для создания базы данных
- Минимальное разрешение экрана: 1024x768

## Установка и запуск

1. Клонировать репозиторий
2. Восстановить зависимости NuGet (Npgsql)
3. Настроить параметры подключения к БД в Form2
4. Запустить приложение и создать схему базы данных
5. Начать работу с данными

## Структура проекта

```
BaseData/
├── Forms/
│   ├── Form1.cs          # Главное меню
│   ├── Form2.cs          # Подключение к БД
│   ├── Form3.cs          # Просмотр данных
│   └── Form4.cs          # Добавление данных
├── UserControls/
│   ├── Clients.cs        # Управление клиентами
│   ├── GoodsUC.cs        # Управление товарами
│   └── SellsUC.cs        # Просмотр продаж
├── DataForms/
│   ├── AddClientForm.cs  # Форма клиента
│   ├── AddProductForm.cs # Форма товара
│   └── AddSaleForm.cs    # Форма продажи
└── Utilities/
    ├── AppSettings.cs    # Настройки приложения
    └── Styles.cs         # Стили интерфейса
```

## Преимущества системы

- **Полная CRUD-функциональность** для всех сущностей
- **Интуитивный интерфейс** с единым стилем оформления
- **Надежная работа с данными** с транзакциями и обработкой ошибок
- **Гибкая система скидок** и поддержка multiple currencies
- **Масштабируемая архитектура** с разделением на компоненты

Проект демонстрирует хорошие практики разработки Windows Forms приложений с полноценной бизнес-логикой и работой с базой данных.
